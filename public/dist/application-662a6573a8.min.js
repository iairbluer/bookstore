!function(i){"use strict";var n="mean",o={applicationEnvironment:i.env,applicationModuleName:n,applicationModuleVendorDependencies:["ngResource","ngAnimate","ngMessages","ui.router","ui.bootstrap","ngFileUpload","ui-notification"],registerModule:function(i,o){angular.module(i,o||[]),angular.module(n).requires.push(i)}};i.ApplicationConfiguration=o,angular.module("ui-notification").config(["NotificationProvider",function(i){i.setOptions({delay:2e3,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"right",positionY:"bottom"})}])}(window);
!function(o){"use strict";function e(e,n,t,i){n.html5Mode({enabled:!0,requireBase:!1}).hashPrefix("!"),t.interceptors.push("authInterceptor"),e.debugInfoEnabled("production"!==o.applicationEnvironment),i.debugEnabled("production"!==o.applicationEnvironment)}angular.module(o.applicationModuleName,o.applicationModuleVendorDependencies),angular.module(o.applicationModuleName).config(e),e.$inject=["$compileProvider","$locationProvider","$httpProvider","$logProvider"],angular.element(document).ready(function(){if(window.location.hash&&"#_=_"===window.location.hash)if(window.history&&history.pushState)window.history.pushState("",document.title,window.location.pathname);else{var e={top:document.body.scrollTop,left:document.body.scrollLeft};window.location.hash="",document.body.scrollTop=e.top,document.body.scrollLeft=e.left}angular.bootstrap(document,[o.applicationModuleName])})}(ApplicationConfiguration);
!function(o){"use strict";o.registerModule("books",["core"]),o.registerModule("books.services"),o.registerModule("books.routes",["ui.router","core.routes","books.services"])}(ApplicationConfiguration);
!function(e){"use strict";e.registerModule("core"),e.registerModule("core.routes",["ui.router"]),e.registerModule("core.admin",["core"]),e.registerModule("core.admin.routes",["ui.router"])}(ApplicationConfiguration);
!function(e){"use strict";e.registerModule("users"),e.registerModule("users.admin"),e.registerModule("users.admin.routes",["ui.router","core.routes","users.admin.services"]),e.registerModule("users.admin.services"),e.registerModule("users.routes",["ui.router","core.routes"]),e.registerModule("users.services")}(ApplicationConfiguration);
!function(){"use strict";function o(o){o.addMenuItem("topbar",{title:"Books",state:"books",type:"dropdown",roles:["*"]}),o.addSubMenuItem("topbar","books",{title:"List Books",state:"books.list",roles:["*"]}),o.addSubMenuItem("topbar","books",{title:"Add A Book",state:"books.create",roles:["*"]})}angular.module("books").run(o),o.$inject=["menuService"]}();
!function(){"use strict";function o(o){o.state("books",{abstract:!0,url:"/books",template:"<ui-view/>"}).state("books.create",{url:"/create",templateUrl:"/modules/books/client/views/form-book.client.view.html",controller:"BooksController",controllerAs:"vm",data:{roles:["guest","user"]},resolve:{bookResolve:t}}).state("books.edit",{url:"/:bookId/edit",templateUrl:"/modules/books/client/views/form-book.client.view.html",controller:"BooksController",controllerAs:"vm",data:{roles:["guest","user"],pageTitle:"{{ bookResolve.title }}"},resolve:{bookResolve:e}}).state("books.list",{url:"",templateUrl:"/modules/books/client/views/list-books.client.view.html",controller:"BooksListController",controllerAs:"vm"}).state("books.view",{url:"/:bookId",templateUrl:"/modules/books/client/views/view-book.client.view.html",controller:"BooksController",controllerAs:"vm",resolve:{bookResolve:e},data:{roles:["guest","user"],pageTitle:"{{ bookResolve.title }}"}})}function e(o,e){return e.get({bookId:o.bookId}).$promise}function t(o){return new o}angular.module("books.routes").config(o),o.$inject=["$stateProvider"],e.$inject=["$stateParams","BooksService"],t.$inject=["BooksService"]}();
!function(){"use strict";function o(o,e,s,c,i,t){var n=this;n.book=c,n.authentication=i,n.form={},n.remove=function(){s.confirm("Are you sure you want to delete?")&&n.book.$remove(function(){e.go("books.list"),t.success({message:'<i class="glyphicon glyphicon-ok"></i> book deleted successfully!'})})},n.save=function(s){if(!s)return o.$broadcast("show-errors-check-validity","vm.form.bookForm"),!1;n.book.createOrUpdate().then(function(o){e.go("books.list"),t.success({message:'<i class="glyphicon glyphicon-ok"></i> book saved successfully!'})}).catch(function(o){t.error({message:o.data.message,title:'<i class="glyphicon glyphicon-remove"></i> book save error!'})})},n.genres=["Science fiction","Satire","Drama","Action","Romance","Mystery","Horror"]}angular.module("books").controller("BooksController",o),o.$inject=["$scope","$state","$window","bookResolve","Authentication","Notification","BooksService"]}();
!function(){"use strict";function e(e,t){var i=this;i.buildPager=function(){i.pagedItems=[],i.itemsPerPage=15,i.currentPage=1,i.figureOutItemsToDisplay()},i.figureOutItemsToDisplay=function(){i.filteredItems=e("filter")(i.books,{$:i.search}),i.filterLength=i.filteredItems.length;var t=(i.currentPage-1)*i.itemsPerPage,r=t+i.itemsPerPage;i.pagedItems=i.filteredItems.slice(t,r)},i.pageChanged=function(){i.figureOutItemsToDisplay()},t.query(function(e){console.log("data = "+JSON.stringify(e)),i.books=e,i.buildPager()})}angular.module("books").controller("BooksListController",e),e.$inject=["$filter","BooksService"]}();
!function(){"use strict";function o(o,t){function e(o){function t(o){}function e(o){n(o.data)}return o._id?o.$update(t,e):o.$save(t,e)}function n(o){t.error(o)}var r=o("/api/books/:bookId",{bookId:"@_id"},{update:{method:"PUT"}});return angular.extend(r.prototype,{createOrUpdate:function(){return e(this)}}),r}angular.module("books.services").factory("BooksService",o),o.$inject=["$resource","$log"]}();
!function(){"use strict";function t(t){t.state("admin",{abstract:!0,url:"/admin",template:"<ui-view/>",data:{roles:["admin"]}})}angular.module("core.admin.routes").config(t),t.$inject=["$stateProvider"]}();
!function(){"use strict";function t(t){t.addMenu("account",{roles:["user"]}),t.addMenuItem("account",{title:"",state:"settings",type:"dropdown",roles:["user"]}),t.addSubMenuItem("account","settings",{title:"Edit Profile",state:"settings.profile"}),t.addSubMenuItem("account","settings",{title:"Edit Profile Picture",state:"settings.picture"}),t.addSubMenuItem("account","settings",{title:"Change Password",state:"settings.password"}),t.addSubMenuItem("account","settings",{title:"Manage Social Accounts",state:"settings.accounts"})}angular.module("core").run(t),t.$inject=["menuService"]}();
!function(){"use strict";function t(t,e,n){function a(t,n){t.data&&t.data.ignoreState||(e.previous={state:t,params:n,href:e.href(t,n)})}t.$on("$stateChangeStart",function(t,o,r,i,s){if(o.data&&o.data.roles&&o.data.roles.length>0){for(var u=!1,c=0,f=o.data.roles;c<f.length;c++)if("guest"===f[c]||n.user&&void 0!==n.user.roles&&-1!==n.user.roles.indexOf(f[c])){u=!0;break}u||(t.preventDefault(),null!==n.user&&"object"==typeof n.user?e.transitionTo("forbidden"):e.go("authentication.signin").then(function(){a(o,r)}))}}),t.$on("$stateChangeSuccess",function(t,e,n,o,r){a(o,r)})}angular.module("core").run(t),t.$inject=["$rootScope","$state","Authentication"]}();
!function(){"use strict";function e(e,t){t.rule(function(e,t){var r=t.path();if(r.length>1&&"/"===r[r.length-1]){var o=r.substr(0,r.length-1);t.replace().path(o)}}),t.otherwise(function(e,t){e.get("$state").transitionTo("not-found",null,{location:!1})}),e.state("home",{url:"/",templateUrl:"/modules/core/client/views/home.client.view.html",controller:"HomeController",controllerAs:"vm"}).state("not-found",{url:"/not-found",templateUrl:"/modules/core/client/views/404.client.view.html",controller:"ErrorController",controllerAs:"vm",params:{message:["$stateParams",function(e){return e.message}]},data:{ignoreState:!0}}).state("bad-request",{url:"/bad-request",templateUrl:"/modules/core/client/views/400.client.view.html",controller:"ErrorController",controllerAs:"vm",params:{message:["$stateParams",function(e){return e.message}]},data:{ignoreState:!0}}).state("forbidden",{url:"/forbidden",templateUrl:"/modules/core/client/views/403.client.view.html",data:{ignoreState:!0}})}angular.module("core.routes").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}();
!function(){"use strict";function r(r){var e=this;e.errorMessage=null,r.message&&(e.errorMessage=r.message)}angular.module("core").controller("ErrorController",r),r.$inject=["$stateParams"]}();
!function(){"use strict";function e(e,t,n,o){var c=this;c.accountMenu=o.getMenu("account").items[0],c.authentication=n,c.isCollapsed=!1,c.menu=o.getMenu("topbar"),e.$on("$stateChangeSuccess",function(){c.isCollapsed=!1})}angular.module("core").controller("HeaderController",e),e.$inject=["$scope","$state","Authentication","menuService"]}();
!function(){"use strict";angular.module("core").controller("HomeController",function(){})}();
!function(){"use strict";function t(t,n){return{restrict:"A",link:function(e,i,c){n.innerWidth>=800&&t(function(){var t=i[0];t.focus(),t.selectionStart=t.selectionEnd=t.value.length},100)}}}angular.module("core").directive("autofocus",t),t.$inject=["$timeout","$window"]}();
!function(){"use strict";function t(t,e,a){return{restrict:"A",link:function(n,c){t.$on("$stateChangeSuccess",function(t,n){var i="MEAN.js - ";n.name.split(".").forEach(function(t,e){i=i+t.charAt(0).toUpperCase()+t.slice(1)+" - "}),n.data&&n.data.pageTitle&&(i=e(i+n.data.pageTitle+" - ")(a.$current.locals.globals)),i=i.slice(0,0-" - ".length),c.text(i)})}}}angular.module("core").directive("pageTitle",t),t.$inject=["$rootScope","$interpolate","$state"]}();
!function(){"use strict";function r(r,e){return{restrict:"A",require:"^form",compile:function(o,n){if(-1===n.showErrors.indexOf("skipFormGroupCheck")&&!o.hasClass("form-group")&&!o.hasClass("input-group"))throw new Error("show-errors element does not have the 'form-group' or 'input-group' class");return function(o,n,s,t){function i(r){if(n.toggleClass("has-error",m&&r),h)return n.toggleClass("has-success",m&&!r)}var a,u,c,l,h,f=!1,m=!1;if(l=o.$eval(s.showErrors)||{},h=l.showSuccess||!1,a=n[0].querySelector(".form-control[name]")||n[0].querySelector("[name]"),c=angular.element(a),!(u=e(c.attr("name")||"")(o)))throw new Error("show-errors element has no child input elements with a 'name' attribute class");o.$watch(function(){return t[u]&&t[u].$invalid},i),o.$on("show-errors-check-validity",function(r,e){if(angular.isUndefined(e)||t.$name===e)return f=!0,m=!0,i(t[u].$invalid)}),o.$on("show-errors-reset",function(e,o){if(angular.isUndefined(o)||t.$name===o)return r(function(){n.removeClass("has-error"),n.removeClass("has-success"),m=!1},0,!1)})}}}}angular.module("core").directive("showErrors",r),r.$inject=["$timeout","$interpolate"]}();
!function(){"use strict";angular.module("core").factory("menuService",function(){function e(e,s){return s=s||{},n.menus[e]={roles:s.roles||n.defaultRoles,items:s.items||[],shouldRender:t},n.menus[e]}var t,n={addMenu:e,addMenuItem:function(e,s){return n.validateMenuExistence(e),s=s||{},n.menus[e].items.push({title:s.title||"",state:s.state||"",type:s.type||"item",class:s.class,roles:null===s.roles||void 0===s.roles?n.defaultRoles:s.roles,position:s.position||0,items:[],shouldRender:t}),s.items&&s.items.forEach(function(t){n.addSubMenuItem(e,s.state,t)}),n.menus[e]},addSubMenuItem:function(e,s,u){return u=u||{},n.validateMenuExistence(e),n.menus[e].items.filter(function(e){return e.state===s}).forEach(function(e){e.items.push({title:u.title||"",state:u.state||"",params:u.params||{},roles:null===u.roles||void 0===u.roles?e.roles:u.roles,position:u.position||0,shouldRender:t})}),n.menus[e]},defaultRoles:["user","admin"],getMenu:function(e){return n.validateMenuExistence(e),n.menus[e]},menus:{},removeMenu:function(e){n.validateMenuExistence(e),delete n.menus[e]},removeMenuItem:function(e,t){return n.validateMenuExistence(e),n.menus[e].items=n.menus[e].items.filter(function(e){return e.state!==t}),n.menus[e]},removeSubMenuItem:function(e,t){return n.validateMenuExistence(e),n.menus[e].items.forEach(function(e){e.items=e.items.filter(function(e){return e.state!==t})}),n.menus[e]},validateMenuExistence:function(e){if(!e||!e.length)throw new Error("MenuId was not provided");if(!n.menus[e])throw new Error("Menu does not exist");return!0}};return t=function(e){return-1!==this.roles.indexOf("*")||!!e&&e.roles.filter(function(e){return-1!==this.roles.indexOf(e)},this).length>0},e("topbar",{roles:["*"]}),n})}();
!function(){"use strict";function t(t,e,n){function o(){t.user&&(c.socket=io())}var c={connect:o,emit:function(t,e){c.socket&&c.socket.emit(t,e)},on:function(t,e){c.socket&&c.socket.on(t,function(t){n(function(){e(t)})})},removeListener:function(t){c.socket&&c.socket.removeListener(t)},socket:null};return o(),c}angular.module("core").factory("Socket",t),t.$inject=["Authentication","$state","$timeout"]}();
!function(){"use strict";function e(e){e.addSubMenuItem("topbar","admin",{title:"Manage Users",state:"admin.users"})}angular.module("users.admin").run(e),e.$inject=["menuService"]}();
!function(){"use strict";function e(e){function s(e,s){return s.get({userId:e.userId}).$promise}e.state("admin.users",{url:"/users",templateUrl:"/modules/users/client/views/admin/list-users.client.view.html",controller:"UserListController",controllerAs:"vm"}).state("admin.user",{url:"/users/:userId",templateUrl:"/modules/users/client/views/admin/view-user.client.view.html",controller:"UserController",controllerAs:"vm",resolve:{userResolve:s},data:{pageTitle:"{{ userResolve.displayName }}"}}).state("admin.user-edit",{url:"/users/:userId/edit",templateUrl:"/modules/users/client/views/admin/edit-user.client.view.html",controller:"UserController",controllerAs:"vm",resolve:{userResolve:s},data:{pageTitle:"{{ userResolve.displayName }}"}}),s.$inject=["$stateParams","AdminService"]}angular.module("users.admin.routes").config(e),e.$inject=["$stateProvider"]}();
!function(){"use strict";function t(t){t.state("settings",{abstract:!0,url:"/settings",templateUrl:"/modules/users/client/views/settings/settings.client.view.html",controller:"SettingsController",controllerAs:"vm",data:{roles:["user","admin"]}}).state("settings.profile",{url:"/profile",templateUrl:"/modules/users/client/views/settings/edit-profile.client.view.html",controller:"EditProfileController",controllerAs:"vm",data:{pageTitle:"Settings"}}).state("settings.password",{url:"/password",templateUrl:"/modules/users/client/views/settings/change-password.client.view.html",controller:"ChangePasswordController",controllerAs:"vm",data:{pageTitle:"Settings password"}}).state("settings.accounts",{url:"/accounts",templateUrl:"/modules/users/client/views/settings/manage-social-accounts.client.view.html",controller:"SocialAccountsController",controllerAs:"vm",data:{pageTitle:"Settings accounts"}}).state("settings.picture",{url:"/picture",templateUrl:"/modules/users/client/views/settings/change-profile-picture.client.view.html",controller:"ChangeProfilePictureController",controllerAs:"vm",data:{pageTitle:"Settings picture"}}).state("authentication",{abstract:!0,url:"/authentication",templateUrl:"/modules/users/client/views/authentication/authentication.client.view.html",controller:"AuthenticationController",controllerAs:"vm"}).state("authentication.signup",{url:"/signup",templateUrl:"/modules/users/client/views/authentication/signup.client.view.html",controller:"AuthenticationController",controllerAs:"vm",data:{pageTitle:"Signup"}}).state("authentication.signin",{url:"/signin?err",templateUrl:"/modules/users/client/views/authentication/signin.client.view.html",controller:"AuthenticationController",controllerAs:"vm",data:{pageTitle:"Signin"}}).state("password",{abstract:!0,url:"/password",template:"<ui-view/>"}).state("password.forgot",{url:"/forgot",templateUrl:"/modules/users/client/views/password/forgot-password.client.view.html",controller:"PasswordController",controllerAs:"vm",data:{pageTitle:"Password forgot"}}).state("password.reset",{abstract:!0,url:"/reset",template:"<ui-view/>"}).state("password.reset.invalid",{url:"/invalid",templateUrl:"/modules/users/client/views/password/reset-password-invalid.client.view.html",data:{pageTitle:"Password reset invalid"}}).state("password.reset.success",{url:"/success",templateUrl:"/modules/users/client/views/password/reset-password-success.client.view.html",data:{pageTitle:"Password reset success"}}).state("password.reset.form",{url:"/:token",templateUrl:"/modules/users/client/views/password/reset-password.client.view.html",controller:"PasswordController",controllerAs:"vm",data:{pageTitle:"Password reset form"}})}angular.module("users.routes").config(t),t.$inject=["$stateProvider"]}();
!function(){"use strict";function e(e,r,i,o,s,t,n,a){function c(e){g.authentication.user=e,a.success({message:'<i class="glyphicon glyphicon-ok"></i> Signup successful!'}),r.go(r.previous.state.name||"home",r.previous.params)}function u(e){a.error({message:e.data.message,title:'<i class="glyphicon glyphicon-remove"></i> Signup Error!',delay:6e3})}function h(e){g.authentication.user=e,a.info({message:"Welcome "+e.firstName}),r.go(r.previous.state.name||"home",r.previous.params)}function l(e){a.error({message:e.data.message,title:'<i class="glyphicon glyphicon-remove"></i> Signin Error!',delay:6e3})}var g=this;g.authentication=t,g.getPopoverMsg=n.getPopoverMsg,g.signup=function(r){if(!r)return e.$broadcast("show-errors-check-validity","vm.userForm"),!1;i.userSignup(g.credentials).then(c).catch(u)},g.signin=function(r){if(!r)return e.$broadcast("show-errors-check-validity","vm.userForm"),!1;i.userSignin(g.credentials).then(h).catch(l)},g.callOauthProvider=function(e){r.previous&&r.previous.href&&(e+="?redirect_to="+encodeURIComponent(r.previous.href)),s.location.href=e},g.usernameRegex=/^(?=[\w.-]+$)(?!.*[._-]{2})(?!\.)(?!.*\.$).{3,34}$/,o.search().err&&a.error({message:o.search().err}),g.authentication.user&&o.path("/")}angular.module("users").controller("AuthenticationController",e),e.$inject=["$scope","$state","UsersService","$location","$window","Authentication","PasswordValidator","Notification"]}();
!function(){"use strict";function s(s,e,t,o,r,a,i){function c(s){u.credentials=null,i.success({message:s.message,title:'<i class="glyphicon glyphicon-ok"></i> Password reset email sent successfully!'})}function n(s){u.credentials=null,i.error({message:s.data.message,title:'<i class="glyphicon glyphicon-remove"></i> Failed to send password reset email!',delay:4e3})}function l(s){u.passwordDetails=null,r.user=s,i.success({message:'<i class="glyphicon glyphicon-ok"></i> Password reset successful!'}),o.path("/password/reset/success")}function d(s){i.error({message:s.data.message,title:'<i class="glyphicon glyphicon-remove"></i> Password reset failed!',delay:4e3})}var u=this;u.resetUserPassword=function(o){if(!o)return s.$broadcast("show-errors-check-validity","vm.resetPasswordForm"),!1;t.resetPassword(e.token,u.passwordDetails).then(l).catch(d)},u.askForPasswordReset=function(e){if(!e)return s.$broadcast("show-errors-check-validity","vm.forgotPasswordForm"),!1;t.requestPasswordReset(u.credentials).then(c).catch(n)},u.authentication=r,u.getPopoverMsg=a.getPopoverMsg,u.authentication.user&&o.path("/")}angular.module("users").controller("PasswordController",s),s.$inject=["$scope","$stateParams","UsersService","$location","Authentication","PasswordValidator","Notification"]}();
!function(){"use strict";function r(r){return{require:"ngModel",link:function(o,e,s,n){n.$validators.requirements=function(e){var s=!0;if(e){var n=r.getResult(e),t=0,g=[{color:"danger",progress:"20"},{color:"warning",progress:"40"},{color:"info",progress:"60"},{color:"primary",progress:"80"},{color:"success",progress:"100"}];n.errors.length<g.length&&(t=g.length-n.errors.length-1),o.requirementsColor=g[t].color,o.requirementsProgress=g[t].progress,n.errors.length?(o.getPopoverMsg=r.getPopoverMsg(),o.passwordErrors=n.errors,s=!1):(o.getPopoverMsg="",o.passwordErrors=[],s=!0)}return s}}}}angular.module("users").directive("passwordValidator",r),r.$inject=["PasswordValidator"]}();
!function(){"use strict";angular.module("users").directive("passwordVerify",function(){return{require:"ngModel",scope:{passwordVerify:"="},link:function(r,e,i,n){r.$watch(function(){var e;return(r.passwordVerify||n)&&(e=r.passwordVerify+"_"+n),e},function(e){e&&(n.$validators.passwordVerify=function(e){return r.passwordVerify===e})})}}})}();
!function(){"use strict";angular.module("users").directive("lowercase",function(){return{require:"ngModel",link:function(e,r,n,s){s.$parsers.push(function(e){return e?e.toLowerCase():""}),r.css("text-transform","lowercase")}}})}();
!function(){"use strict";function e(e){return{user:e.user}}angular.module("users.services").factory("Authentication",e),e.$inject=["$window"]}();
!function(){"use strict";function e(e){var r=e.owaspPasswordStrengthTest;return{getResult:function(e){return r.test(e)},getPopoverMsg:function(){return"Please enter a passphrase or password with "+r.configs.minLength+" or more characters, numbers, lowercase, uppercase, and special characters."}}}angular.module("users.services").factory("PasswordValidator",e),e.$inject=["$window"]}();
!function(){"use strict";function e(e){var r=e("/api/users",{},{update:{method:"PUT"},updatePassword:{method:"POST",url:"/api/users/password"},deleteProvider:{method:"DELETE",url:"/api/users/accounts",params:{provider:"@provider"}},sendPasswordResetToken:{method:"POST",url:"/api/auth/forgot"},resetPasswordWithToken:{method:"POST",url:"/api/auth/reset/:token"},signup:{method:"POST",url:"/api/auth/signup"},signin:{method:"POST",url:"/api/auth/signin"}});return angular.extend(r,{changePassword:function(e){return this.updatePassword(e).$promise},removeSocialAccount:function(e){return this.deleteProvider({provider:e}).$promise},requestPasswordReset:function(e){return this.sendPasswordResetToken(e).$promise},resetPassword:function(e,r){return this.resetPasswordWithToken({token:e},r).$promise},userSignup:function(e){return this.signup(e).$promise},userSignin:function(e){return this.signin(e).$promise}}),r}function r(e){return e("/api/users/:userId",{userId:"@_id"},{update:{method:"PUT"}})}angular.module("users.services").factory("UsersService",e),e.$inject=["$resource"],angular.module("users.admin.services").factory("AdminService",r),r.$inject=["$resource"]}();
!function(){"use strict";function e(e,t,r){return{responseError:function(a){if(!a.config.ignoreAuthModule)switch(a.status){case 400:t.get("$state").go("bad-request",{message:a.data.message});break;case 401:r.user=null,t.get("$state").transitionTo("authentication.signin");break;case 403:t.get("$state").transitionTo("forbidden");break;case 404:t.get("$state").go("not-found",{message:a.data.message});break;case-1:t.get("Notification").error({message:"No response received from server. Please try again later.",title:"Error processing request!",delay:5e3})}return e.reject(a)}}}angular.module("core").factory("authInterceptor",e),e.$inject=["$q","$injector","Authentication"]}();
!function(){"use strict";function e(e,t,r){var i=this;i.buildPager=function(){i.pagedItems=[],i.itemsPerPage=15,i.currentPage=1,i.figureOutItemsToDisplay()},i.figureOutItemsToDisplay=function(){i.filteredItems=t("filter")(i.users,{$:i.search}),i.filterLength=i.filteredItems.length;var e=(i.currentPage-1)*i.itemsPerPage,r=e+i.itemsPerPage;i.pagedItems=i.filteredItems.slice(e,r)},i.pageChanged=function(){i.figureOutItemsToDisplay()},r.query(function(e){i.users=e,i.buildPager()})}angular.module("users.admin").controller("UserListController",e),e.$inject=["$scope","$filter","AdminService"]}();
!function(){"use strict";function e(e,s,r,u,i,o){var n=this;n.authentication=u,n.user=i,n.remove=function(e){r.confirm("Are you sure you want to delete this user?")&&(e?(e.$remove(),n.users.splice(n.users.indexOf(e),1),o.success("User deleted successfully!")):n.user.$remove(function(){s.go("admin.users"),o.success({message:'<i class="glyphicon glyphicon-ok"></i> User deleted successfully!'})}))},n.update=function(r){if(!r)return e.$broadcast("show-errors-check-validity","vm.userForm"),!1;var u=n.user;u.$update(function(){s.go("admin.user",{userId:u._id}),o.success({message:'<i class="glyphicon glyphicon-ok"></i> User saved successfully!'})},function(e){o.error({message:e.data.message,title:'<i class="glyphicon glyphicon-remove"></i> User update error!'})})},n.isContextUserSelf=function(){return n.user.username===n.authentication.user.username}}angular.module("users.admin").controller("UserController",e),e.$inject=["$scope","$state","$window","Authentication","userResolve","Notification"]}();
!function(){"use strict";function s(s,e,o,r,a,t){function c(s){t.success({message:'<i class="glyphicon glyphicon-ok"></i> Password Changed Successfully'}),n.passwordDetails=null}function i(s){t.error({message:s.data.message,title:'<i class="glyphicon glyphicon-remove"></i> Password change failed!'})}var n=this;n.user=o.user,n.changeUserPassword=function(e){if(!e)return s.$broadcast("show-errors-check-validity","vm.passwordForm"),!1;r.changePassword(n.passwordDetails).then(c).catch(i)},n.getPopoverMsg=a.getPopoverMsg}angular.module("users").controller("ChangePasswordController",s),s.$inject=["$scope","$http","Authentication","UsersService","PasswordValidator","Notification"]}();
!function(){"use strict";function e(e,t,i,o){function s(e){o.success({message:'<i class="glyphicon glyphicon-ok"></i> Successfully changed profile picture'}),n.user=t.user=e,n.fileSelected=!1,n.progress=0}function r(e){n.fileSelected=!1,n.progress=0,o.error({message:e.message,title:'<i class="glyphicon glyphicon-remove"></i> Failed to change profile picture'})}var n=this;n.user=t.user,n.progress=0,n.upload=function(t){i.upload({url:"/api/users/picture",data:{newProfilePicture:t}}).then(function(t){e(function(){s(t.data)})},function(e){e.status>0&&r(e.data)},function(e){n.progress=parseInt(100*e.loaded/e.total,10)})}}angular.module("users").controller("ChangeProfilePictureController",e),e.$inject=["$timeout","Authentication","Upload","Notification"]}();
!function(){"use strict";function e(e,r,s,i,o,t){var c=this;c.user=o.user,c.updateUserProfile=function(r){if(!r)return e.$broadcast("show-errors-check-validity","vm.userForm"),!1;new i(c.user).$update(function(r){e.$broadcast("show-errors-reset","vm.userForm"),t.success({message:'<i class="glyphicon glyphicon-ok"></i> Edit profile successful!'}),o.user=r},function(e){t.error({message:e.data.message,title:'<i class="glyphicon glyphicon-remove"></i> Edit profile failed!'})})}}angular.module("users").controller("EditProfileController",e),e.$inject=["$scope","$http","$location","UsersService","Authentication","Notification"]}();
!function(){"use strict";function e(e,o,i,n,t){function c(e){t.success({message:'<i class="glyphicon glyphicon-ok"></i> Removed successfully!'}),s.user=n.user=e}function r(e){t.error({message:e.message,title:'<i class="glyphicon glyphicon-remove"></i> Remove failed!'})}var s=this;s.user=n.user,s.hasConnectedAdditionalSocialAccounts=function(){return s.user.additionalProvidersData&&Object.keys(s.user.additionalProvidersData).length},s.isConnectedSocialAccount=function(e){return s.user.provider===e||s.user.additionalProvidersData&&s.user.additionalProvidersData[e]},s.removeUserSocialAccount=function(e){i.removeSocialAccount(e).then(c).catch(r)},s.callOauthProvider=function(i){i+="?redirect_to="+encodeURIComponent(e.$current.url.prefix),o.location.href=i}}angular.module("users").controller("SocialAccountsController",e),e.$inject=["$state","$window","UsersService","Authentication","Notification"]}();
!function(){"use strict";function t(t,e){this.user=e.user}angular.module("users").controller("SettingsController",t),t.$inject=["$scope","Authentication"]}();